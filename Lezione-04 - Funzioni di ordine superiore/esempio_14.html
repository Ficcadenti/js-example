<!--
	# 
	# MODULE DESCRIPTION:
	# esempio_14.html
	# 
	# 
	# AUTHORS:
	# Author Name		Raffaele Ficcadenti
	# Author email		raffaele.ficcadenti@gmail.com
	# 
	# 
	# HISTORY:
	# -[Date]-      -[Who]-               -[What]-
	# 25-11-2016    Ficcadenti Raffaele         
	# -
-->

<hmtl>

<head>
	<title>sorgente: esempio_14.html</title>
	<!-- Sezione per i CSS -->
	<link rel="stylesheet" type="text/css" href="../assets/css/default.css">
</head>

<body>	
	<p>
		<i>
			"Ci sono due modi per programmare del software: uno &egrave; di crearlo tato semplice<br>
			da non lascia spazio ai difetti, l'altro di crearlo tanto complicato da non riuscire<br>
			a trovarci difetti."<br>
		</i>
		<br>
		<strong>Tony Hoare</strong><i> Premio Turing 1980</i>
	</p>
	<hr>

	<script type="application/x-javascript" src="../assets/lib/my_scripts.js"></script>
	<script type="application/x-javascript" src="../assets/lib/ancestry.js"></script>
	<script type="application/x-javascript">
		infoBrowser();
		capitolo("Funzioni di ordine superiore");
		paragrafo("JSON");

		var json_obj={"nome":"Raffaele", "cognome":"Ficcadenti", "email":"raffaele.ficcadenti@gmail.com"};
		var str=JSON.stringify(json_obj);

		println(str);

		println(JSON.parse(str).nome);
		println(JSON.parse(str).cognome);
		println(JSON.parse(str).email);

		var ancestry=JSON.parse(ANCESTRY_FILE);
		println(ancestry.length);

		println(ANCESTRY_FILE);


		/*for(var i=0;i<ancestry.length;i++)
		{
			println(ancestry[i].name);
		}*/

		function filter(array,test)
		{
			var passed=[];
			for(var i=0;i<array.length;i++)
			{
				if(test(array[i]))
				{
					passed.push(array[i]);
				}
			}
			return passed;
		}

		function map(array,transorm)
		{
			var mapped=[];
			for(var i=0;i<array.length;i++)
			{
				mapped.push(transorm(array[i]));
			}
			return mapped;
		}

		function reduce(array,combine,start)
		{
			var current=start;
  			for (var i = 0; i < array.length; i++)
  			{
    			current = combine(current, array[i]);
  			}
  			return current;
		}

		

		console.log(filter(ancestry,function(person)
			{
				return person.born > 1900 && person.born < 1925;
			}));

		console.log(ancestry.filter(function(item)
			{
				return item.father == "Carel Haverbeke";
			}));


		var overNovanta=filter(ancestry,function(person)
			{
				return person.died - person.born > 90;
			});
		console.log(overNovanta);

		console.log(reduce([1, 2, 3, 4], function(a, b) 
			{
				console.log(a,b);
			  	return a + b;
			}, 0));

		console.log(ancestry.reduce(function(min, cur) 
			{
			  if (cur.born < min.born) return cur;
			  else return min;
			}));

		var arrayDiNomi=map(overNovanta,function(element)
			{
				return element.name;
			});
		println(arrayDiNomi.join("-"));

		arrayDiNomi.map(function(item)
			{
				println("MAP: "+item);
			});


		var a=[1,2,3,4,5,6,7,8,9,10];

		function test(item)
		{
			if((item>5)&&(item<10)) 
			{
				return true;
			}
		}

		function transform(item)
		{
			return "numero: "+item;
		}

		function combine(a, b) 
		{
		  	return a + b;
		}

		console.log(a.filter(test));
		console.log(a.map(transform));
		console.log(a.reduce(combine,0));

		
		chiudiparagrafo();	
	</script>

	<hr>
	<div id="info">
		<h1>Info</h1>
		<a href="http://www.w3schools.com/js/default.asp" target="_blank">w3schools<span class="dotcom">.com</span></a><br>
		<a href="http://html5index.org/index.html" target="_blank">The HTML 5 JavaScript API Index</a>
	</div>

</body>
</hmtl>