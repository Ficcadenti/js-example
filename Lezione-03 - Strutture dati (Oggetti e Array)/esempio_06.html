<!--
	# 
	# MODULE DESCRIPTION:
	# esempio_06.html
	# 
	# 
	# AUTHORS:
	# Author Name		Raffaele Ficcadenti
	# Author email		raffaele.ficcadenti@gmail.com
	# 
	# 
	# HISTORY:
	# -[Date]-      -[Who]-               -[What]-
	# 19-11-2016    Ficcadenti Raffaele         
	# -
-->

<hmtl>

<head>
	<title>sorgente: esempio_06.html</title>
	<!-- Sezione per i CSS -->
	<link rel="stylesheet" type="text/css" href="../assets/css/default.css">
</head>

<body>	
	<p>
		<i>
			"In due occasioni mi hanno chiesto, 'Dica, signor Babbage, se inserisce <br>
			nella macchina le cifre sbagliate, ne usciranno risposte giuste?' [...] Non <br>
			riesco acapacitarmi della confusione di idee che potrebbe provocare tale <br>
			domanda."<br>
		</i>
		<br>
		<strong>Charles Babbage</strong><i> Passages from the Life of a Philosopher (1864)</i>
	</p>
	<hr>

	<script type="application/x-javascript" src="../assets/lib/my_scripts.js"></script>
	<script type="application/x-javascript" src="../assets/lib/journal.js"></script>
	<script type="application/x-javascript">
		infoBrowser();
		capitolo("Strutture Dati");

		paragrafo("Oggetti");

		var lista=[2,3,4,5,6];
		lista.x=10;
		println("Elementi in lista => "+lista.length);
		println("lista => "+lista);
		println("lista[1] => "+lista[1]);
		println("lista["+(1-1)+"] => "+lista[1-1]);

		
		println("Accesso alle propriet\xE0 di un oggetto: ")
		println(lista["x"]); // o in alternativa
		println(lista.x);

		println();
		for(var i=0;i<lista.length;i++)
		{
			println("lista["+i+"] =>"+lista[i]);
		}

		var str="Ciao";

		println("str : "+typeof str);
		println("str.toUpperCase : "+typeof str.toUpperCase);
		println("str : "+str);
		println("str : "+str.toUpperCase());
		println("str : "+str.toLowerCase());

		
		var lista = [];
		lista.push("Raffaele");
		lista.push("Valeria");
		lista.push("Sofia");
		lista.push("Maria");
		lista.push("Gabriele");
		println("lista => "+lista);
		println("join lista => "+lista.join("-"));
		println("lista => "+lista.pop());
		println("lista => "+lista);
		println("lista => "+lista[0]);

		println();

		var obj1={
			topo: false,
			eventi: ["evt1","evt2","evt3","evt4"]
		};

		println(obj1.topo);
		println(obj1.eventi);
		println(obj1.eventi[2]);
		println("obj1.elefante="+obj1.elefante);
		console.log("obj1.elefante="+obj1.elefante);
		obj1.elefante=true;
		println("obj1.elefante="+obj1.elefante);
		console.log("obj1.elefante="+obj1.elefante);

		println();

		var obj2={
			nome: "Raffaele",
			"indirizzo email": "raffaele.ficcadenti@gmail.com"
		};

		println(obj2.nome+" <b>"+obj2["indirizzo email"]+"</b>");

		delete obj2["indirizzo email"];
		println(obj2.nome+" <b>"+obj2["indirizzo email"]+"</b>");		

		println("nome" in obj2);
		println("indirizzo email" in obj2);

		println();

		var elenco=[
			{
				nome:"Raffaele",
				cognome:"Ficcadenti",
				email:["raffaele.ficcadenti@gmail.com","raffaele.ficcadenti@e-tech.net"],
				abilitato:true
			},
			{
				nome:"Valeria",
				cognome:"Greco",
				email:["valeria5.greco@gmail.com"],
				abilitato:true
			},
			{
				nome:"Francesco",
				cognome:"Greco",
				email:["francesco.greco@gmail.com"],
				abilitato:false
			}
		];

		for(var i=0;i<elenco.length;i++)
		{
			if(elenco[i].abilitato)
			{
				println(elenco[i].nome+" "+elenco[i].cognome+": "+elenco[i].email.join(";"));
			}
		}

		println();

		var p1=[1,2,3];
		var p2=p1;
		var p3=[1,2,3];

		println(typeof p1);
		println("p1="+p1);
		println("p2="+p2);
		println("p3="+p3);

		println("p1==p2? "+(p1==p2));
		println("p1==p3? "+(p1==p3));
		p1[0]=100;
		p2[1]=200;
		println("p1="+p1);
		println("p2="+p2);
		println("p3="+p3);

		println();

		
		var map={};

		function phi(tab)
		{
			return ((tab[3]*tab[0] - tab[2]*tab[1])/
				Math.sqrt(	(tab[2]+tab[3])*
							(tab[0]+tab[1])*
							(tab[1]+tab[3])*
							(tab[0]+tab[2])
							));
		}

		function hasEvent(event,entry)		
		{
			return (entry.events.indexOf(event)!=-1);
		}


		function tableFor(event, journal) 
		{
			var table = [0, 0, 0, 0];
			for (var i = 0; i < journal.length; i++) 
			{
				var entry = journal[i];
				var index = 0;

				if (hasEvent(event, entry)) 
				{
					index += 1;
				}
				if (entry.squirrel) 
				{
					index += 2;
				}

				table[index] += 1;

			}
			return table;
		}

		function storePhi(map,event,phi)
		{
			map[event]=phi;
		}

		function gatherCorrelations(journal) 
		{
			var phis = {};
			for (var entry = 0; entry < journal.length; entry++) 
			{
				var events = journal[entry].events;
				for (var i = 0; i < events.length; i++) 
				{
					var event = events[i];
					if (!(event in phis))
					{
						phis[event] = phi(tableFor(event, journal));
					}
				}
			}
			return phis;
		}


		println(JOURNAL.length);
		println(tableFor("lasagna",JOURNAL));
		println("Correlazione di["+tableFor("lasagna",JOURNAL)+"]="+phi(tableFor("lasagna",JOURNAL)));

		storePhi(map,"lasagna",phi(tableFor("lasagna",JOURNAL)));
		storePhi(map,"pizza",phi(tableFor("pizza",JOURNAL)));

		
		if("lasagna" in map)
		{
			println("phi(lasagna)= "+map["lasagna"]);
		}

		println("----------------------------------");

		for (var i = 0; i < JOURNAL.length; i++) 
		{
			var entry = JOURNAL[i];
			if (hasEvent("peanuts", entry) && !hasEvent("brushed teeth", entry))
			{
				entry.events.push("peanut teeth");
			}
		}

		var map1=gatherCorrelations(JOURNAL);

		for(var evt in map1)
		{
			var phi=map1[evt];
			if( (phi>0.1) || (phi<-0.1))
			{
				println("phi("+evt+")= "+phi);
			}
		}



		chiudiparagrafo();	


	</script>

	<hr>
	<div id="info">
		<h1>Info</h1>
		<a href="http://www.w3schools.com/js/default.asp" target="_blank">w3schools<span class="dotcom">.com</span></a>
	</div>

</body>
</hmtl>